#!/usr/bin/env ruby --disable-all
# frozen_string_literal: true

if %w[-h --help].include?(ARGV[0])
  puts "Usage: #{File.basename(Process.argv0)} [-s | --short]", nil
  puts 'Generate a nice password of 32 (short) or 64 byte size'
else
  def password(size:, block_size:)
    a = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.chars
    Array.new(size) { a.sample }.each_slice(block_size).map(&:join).join('-')
  end
  if ARGV.empty?
    puts(password(size: 64, block_size: 6))
  elsif %w[-s --short].include?(ARGV[0])
    puts(password(size: 32, block_size: 4))
  else
    $stderr.puts("unknonwn option - #{ARGV.first}") or exit(1)
  end
end
