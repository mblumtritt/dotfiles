#!/usr/bin/env ruby
# frozen_string_literal: true

if ARGV.include?('--help') || ARGV.include?('-h')
  puts "Usage: #{File.basename(Process.argv0)} [-s | --short]", nil
  puts 'Generate a nice password of 32 (short) or 64 byte size'
  exit
end

ALPHABET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'

def password(size: 64, block_size: 6)
  a = ALPHABET.chars.shuffle!
  Array.new(size) { a.sample }.each_slice(block_size).map(&:join).join('-')
end

if ARGV.include?('--short') || ARGV.include?('-s')
  puts(password(size: 32, block_size: 4))
else
  puts(password)
end
