#!/usr/bin/env ruby
# frozen_string_literal: true

def password(size: 64, block_size: 6)
  a = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.chars
  Array.new(size) { a.sample }.each_slice(block_size).map(&:join).join('-')
end

case ARGV.first
when '--help', '-h'
  puts "Usage: #{File.basename(Process.argv0)} [-s | --short]", nil
  puts 'Generate a nice password of 32 (short) or 64 byte size'
when '--short', '-s'
  puts(password(size: 32, block_size: 4))
when nil
  puts(password)
else
  $stderr.puts("unknonwn option - #{ARGV.first}")
end
