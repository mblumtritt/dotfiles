#! /bin/sh

set -e

if [ "$1" = '--help' ]; then echo "usage: ${0##*/} [--no-system]

Update System, Homebrew, Homebrew bundles and Ruby gems.
"
else
	if ! [ "$1" = '-s' ] && ! [ "$1" = '--no-system' ]; then
		sudo softwareupdate -i -a
	fi
	brew update
	brew bundle --global
	brew upgrade
	gem update --system
	gem update
	brew cleanup
	gem cleanup
fi
