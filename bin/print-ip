#! /bin/sh
USAGE="Usage: ${0##*/}

Print external or local IP address.

options:
   -4, --ipv4   show IPv4 address (default)
   -6, --ipv6   show IPv6 address
   -l, --local  show local address"

set -e
case "$1" in
(-4|--ipv4|'') curl https://ipecho.net/plain && echo ;;
(-6|--ipv6) dig @resolver1.opendns.com ANY myip.opendns.com +short ;;
(-1|--local) ipconfig getifaddr en0 ;;
(-h|--help) echo "$USAGE" ;;
(*) echo "${0##*/}: invalid argument - $1" >&2 ; exit 1 ;;
esac
