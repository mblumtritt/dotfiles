#! /bin/sh

set -e

[ "$1" = '--help' ] && echo "Usage: ${0##*/} NAME

Set system NAME. (May require password.)" && exit


[ $# = 0 ] && (>&2 echo "${0##*/}: NAME missing") && exit 1

readonly NAME="$*"
sudo scutil --set ComputerName "$NAME"
sudo scutil --set HostName "$NAME"
sudo scutil --set LocalHostName "$NAME"
sudo defaults write /Library/Preferences/SystemConfiguration/com.apple.smb.server NetBIOSName -string "$NAME"
